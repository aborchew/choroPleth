<h4>All Locations ranked based on randomly generated numbers between 1 and 100.</h4>

<div id="map" class="col-sm-8"></div>

<div class="col-sm-4 score-list" style="height:{{ getSvgHeight() + 'px' }};">

  <div class="sort-panel">
    <div class="btn-group" dropdown is-open="status.isopen">
      <button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle ng-disabled="disabled">
        {{ comparator }} <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="" ng-click="comparator = score[totalOrAverage]; reverseOrder = true">Score</a>
        </li>
        <li>
          <a href="" ng-click="comparator = 'stateName'; reverseOrder = false">State Name</a>
        </li>
        <li>
          <a href="" ng-click="comparator = 'tallies.length'; reverseOrder = true">Number of Stores</a>
        </li>
      </ul>
    </div>
  </div>

  <ul class="list-group state-list">
    <li class="list-group-item" ng-class="{'selectedStateId':selectedStateId}" ng-repeat="score in scores | matchFIPS:selectedStateId | orderBy:comparator:reverseOrder">
      <a
        href=""
        ng-click="clickState()"
        ng-mouseover="stateHover()"
        ng-mouseleave="stateHoverOut()"
        style="border-right: 5px solid {{ getStateColor( score[totalOrAverage] ) }};"
      >
        <strong>
          <i class="glyphicon glyphicon-zoom-out back-btn" ng-if="selectedStateId"></i>
          {{ score.stateName | capitalize }}
          <span class="badge pull-right">{{ score.tallies.length }} stores</span>
        </strong>
        <div ng-if="totalOrAverage == 'average'">
          Average Sales: {{ score[totalOrAverage] | number:2 }} per location
        </div>
        <div ng-if="totalOrAverage == 'total'">
          Total Sales: {{ score[totalOrAverage] }}
        </div>
      </a>
    </li>
  </ul>

  <div class="state-legend" ng-if="selectedStateId">
    <span class="value" ng-repeat="color in rangeColors" style="background:{{ color }};">
      {{ getStateRangeLabel(selectedStateId)[$index] }}
    </span>
  </div>

  <ul class="list-group store-list" ng-if="selectedStateId">
    <li
      class="list-group-item"
      ng-repeat="location in getLocations() | filter:{stateId:selectedStateId} | orderBy:'metric':true"
    >
      <a href=""
        ng-mouseover="locationHover()"
        ng-mouseleave="locationHoverOut()"
        ng-click="openLocation()"
        style="border-right: 5px solid {{ getScoreColor(location.metric, location.stateId) }};"
      >
        {{ location.address }}<br ng-if="location.addressLineTwo"/>
        {{ location.addressLineTwo }}<br/>
        {{ location.city }}, {{ location.state }} {{ location.postalCode }}<br/>
        Store ID: {{ location.storeId }}<br/>
        {{ totalOrAverage | capitalize }} Sales: {{ location.metric }}<br/>
        Region: {{ location.region }}<br/>
      </a>
    </li>
  </ul>

</div>
